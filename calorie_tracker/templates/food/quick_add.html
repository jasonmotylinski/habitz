{% extends "base.html" %}
{% block title %}Quick Add Calories — Calorie Tracker{% endblock %}

{% block content %}
<div class="quick-add-page" data-meal-type="{{ meal_type }}" data-date="{{ date }}">
    <!-- Header -->
    <div class="log-header">
        <a href="{{ url_for('food.search', meal=meal_type, date=date) }}" class="back-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
        </a>
        <h1 class="log-title">Quick Add Calories</h1>
    </div>

    <div class="log-content">
        <!-- Calorie Input -->
        <div class="quick-add-section">
            <label class="quick-add-label" for="quick-calories">Calories</label>
            <div class="quick-add-input-wrap">
                <input type="number" id="quick-calories" class="quick-add-calories-input"
                       placeholder="0" min="1" step="1" autofocus>
                <span class="quick-add-unit">kcal</span>
            </div>
        </div>

        <!-- Optional Label -->
        <div class="quick-add-section">
            <label class="quick-add-label" for="quick-name">Description <span class="quick-add-optional">(optional)</span></label>
            <input type="text" id="quick-name" class="quick-add-name-input"
                   placeholder="e.g. Restaurant meal, snack estimate…" maxlength="200">
        </div>

        <!-- Optional Macros -->
        <div class="quick-add-section">
            <button type="button" id="macros-toggle" class="quick-add-macros-toggle">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" id="macros-toggle-icon"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                Add macros <span class="quick-add-optional">(optional)</span>
            </button>
            <div id="macros-fields" class="quick-add-macros-fields hidden">
                <div class="quick-add-macros-grid">
                    <div class="quick-add-macro">
                        <label class="quick-add-macro-label" for="quick-protein">Protein</label>
                        <div class="quick-add-macro-wrap">
                            <input type="number" id="quick-protein" class="quick-add-macro-input" placeholder="0" min="0" step="0.1">
                            <span class="quick-add-macro-unit">g</span>
                        </div>
                    </div>
                    <div class="quick-add-macro">
                        <label class="quick-add-macro-label" for="quick-carbs">Carbs</label>
                        <div class="quick-add-macro-wrap">
                            <input type="number" id="quick-carbs" class="quick-add-macro-input" placeholder="0" min="0" step="0.1">
                            <span class="quick-add-macro-unit">g</span>
                        </div>
                    </div>
                    <div class="quick-add-macro">
                        <label class="quick-add-macro-label" for="quick-fat">Fat</label>
                        <div class="quick-add-macro-wrap">
                            <input type="number" id="quick-fat" class="quick-add-macro-input" placeholder="0" min="0" step="0.1">
                            <span class="quick-add-macro-unit">g</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Meal Type Selector -->
        <div class="meal-selector">
            <span class="meal-selector-label">Meal</span>
            <div class="meal-selector-options">
                {% for mt, label in [('breakfast', 'Breakfast'), ('lunch', 'Lunch'), ('dinner', 'Dinner'), ('snack', 'Snack')] %}
                <label class="meal-option">
                    <input type="radio" name="meal_type" value="{{ mt }}" {% if mt == meal_type %}checked{% endif %}>
                    <span class="meal-option-text">{{ label }}</span>
                </label>
                {% endfor %}
            </div>
        </div>

        <!-- Error message -->
        <p id="quick-add-error" class="quick-add-error hidden"></p>

        <!-- Submit -->
        <button id="quick-add-submit" class="btn btn--primary btn--full btn--lg">
            Add Calories
        </button>
    </div>
</div>
{% endblock %}
