{% extends "base.html" %}
{% block title %}Log Food â€” Calorie Tracker{% endblock %}

{% block content %}
<div class="log-page" data-food-id="{{ food_item_id }}" data-meal-type="{{ meal_type }}" data-date="{{ date }}">
    <!-- Header -->
    <div class="log-header">
        <a href="{{ url_for('food.search', meal=meal_type, date=date) }}" class="back-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
        </a>
        <h1 id="food-name" class="log-title">Loading...</h1>
    </div>

    <!-- Loading state -->
    <div id="log-loading" class="log-loading">
        <div class="spinner"></div>
    </div>

    <!-- Content (hidden until loaded) -->
    <div id="log-content" class="log-content hidden">
        <!-- Serving Info -->
        <div class="serving-section">
            <span id="serving-label" class="serving-label">1 serving</span>
            <div class="serving-adjuster">
                <button class="serving-btn" id="serving-minus" aria-label="Decrease serving">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round"><line x1="5" y1="12" x2="19" y2="12"/></svg>
                </button>
                <input type="number" id="serving-input" class="serving-input" value="1" min="0.5" step="0.5">
                <button class="serving-btn" id="serving-plus" aria-label="Increase serving">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                </button>
            </div>
        </div>

        <!-- Nutrition Display -->
        <div class="nutrition-grid">
            <div class="nutrition-card nutrition-card--calories">
                <span class="nutrition-value" id="nut-calories">0</span>
                <span class="nutrition-label">Calories</span>
            </div>
            <div class="nutrition-card nutrition-card--protein">
                <span class="nutrition-value"><span id="nut-protein">0</span>g</span>
                <span class="nutrition-label">Protein</span>
            </div>
            <div class="nutrition-card nutrition-card--carbs">
                <span class="nutrition-value"><span id="nut-carbs">0</span>g</span>
                <span class="nutrition-label">Carbs</span>
            </div>
            <div class="nutrition-card nutrition-card--fat">
                <span class="nutrition-value"><span id="nut-fat">0</span>g</span>
                <span class="nutrition-label">Fat</span>
            </div>
        </div>

        <!-- Meal Type Selector -->
        <div class="meal-selector">
            <span class="meal-selector-label">Meal</span>
            <div class="meal-selector-options">
                {% for mt, label in [('breakfast', 'Breakfast'), ('lunch', 'Lunch'), ('dinner', 'Dinner'), ('snack', 'Snack')] %}
                <label class="meal-option">
                    <input type="radio" name="meal_type" value="{{ mt }}" {% if mt == meal_type %}checked{% endif %}>
                    <span class="meal-option-text">{{ label }}</span>
                </label>
                {% endfor %}
            </div>
        </div>

        <!-- Submit -->
        <button id="log-submit" class="btn btn--primary btn--full btn--lg">
            Log Food
        </button>
    </div>
</div>
{% endblock %}
